import{E as T,O as S,r as _,G as k,X as x,l as w}from"./index-d8e57e78.js";import{u as y}from"./TasksPage-ec004484.js";const o=_({button:{value:!1,toggle:()=>{o.button.value=!o.button.value}},all:{value:[],status:!1,selectOne:t=>{o.all.value=t.filter(a=>a.select),o.all.status=!1},selectAll:t=>{t.map(a=>a.select=o.all.status),o.all.value=t.filter(a=>a.select)}}}),D=()=>{var m;const t=y(),a=T(),{query:i,project_id:h,countTask:v}=S(t),d=_({data:{}}),c=k({_autor:String((m=a.current)==null?void 0:m._id),_project:"",position:0,name:""}),u=x({edite:!1,view:!1,trash:!1,open:{update:e=>{u.toggle("edite"),d.data=e},view:e=>{u.toggle("view"),d.data=e}}});return{moveSelectToRecycleBin:()=>{const e=o.all.value.map(l=>l._id);t.trash(e)},changePositionTask:e=>{const l=e.moved.newIndex,r=e.moved.oldIndex,f=l<r?l:r,g=l>r?l:r,p=[];if(i.value.sort.includes("desc")){const s=v.value-1;for(let n=s-f;n>=s-g;n--)t.tasks.data[s-n].position=n,p.push({_id:t.tasks.data[s-n]._id,position:n})}else for(let s=f;s<=g;s++)t.tasks.data[s].position=s,p.push({_id:t.tasks.data[s]._id,position:s});t.changePosition(p)},moveToRecycleBin:e=>t.trash([e]),multiSelect:o,ascDesc:e=>{i.value.sort!=`position:${e}`&&(i.value.sort=`position:${e}`,t.getAll())},select:d,create:()=>{c._project=h.value,c.position=v.value+1,t.create(w.omit(c,["clear"]),{actions:()=>c.clear()})},modals:u,query:i,done:e=>{e.done=!e.done,t.update(e)},form:c}};export{D as t};
